<Page
    x:Class="OnlinerServices.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:OnlinerServices.Views"
    xmlns:valueconverter ="using:OnlinerNews.ValueConverterExample"
    xmlns:micro="using:Caliburn.Micro" 
    xmlns:viewModels="using:OnlinerServices.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Margin="0,0,-3.0517578125E-05,0">
    <Page.Resources>
        <valueconverter:CountNewsToStringConverter x:Key="CountNewsToStringConverter" />
    </Page.Resources>

    <Page.BottomAppBar>
        <CommandBar Height="26" >
            <!--<AppBarButton Icon="Back" Label="back" Click="BackButton_Click"/>
            <AppBarButton Icon="Forward" Label="forward" Click="ForwardButton_Click"/>-->
            <AppBarButton Icon="Refresh" Label="refresh" x:Name="RefreshNews"/>
            <AppBarButton Icon="Find" Label="search" x:Name="Search"/>
        </CommandBar>
    </Page.BottomAppBar>

    <Grid>
        <ListView
           FontSize="26"
           ItemsSource="{Binding News}"
           SelectionMode="Single" 
           Margin="0,74,0,22"
           IsItemClickEnabled="True"
           micro:Message.Attach="[Event ItemClick] = [Action GoToDetail($clickeditem)]"
           >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <!--<Grid>
                        <TextBlock 
                             Style="{StaticResource MyTextBlockStyle}"
                             Text="{Binding Date}"
                             TextWrapping="Wrap"
                             FontSize="20"
                             Margin="10"
                             Width="302"
                             IsTapEnabled="True"
                             HorizontalAlignment="Right"  
                             />
                        <Image Source="{Binding ImagePath}"  />
                        <TextBlock 
                             Style="{StaticResource MyTextBlockStyle}"
                             Text="{Binding Title}"
                             TextWrapping="Wrap"
                             FontSize="20"
                             Margin="10"
                             Width="302"
                             IsTapEnabled="True"
                             VerticalAlignment="Bottom"
                             Foreground="#FFD9E685"  
                             />
                    </Grid>-->
                    <!--<StackPanel  Orientation="Horizontal">

                        <Image Source="{Binding ImagePath}" Width="100" Height="100" />
                        <TextBlock 
                             Style="{StaticResource MyTextBlockStyle}"
                             Text="{Binding Title}"
                             FontSize="20"
                             Margin="10"
                             Width="302"
                             IsTapEnabled="True" Canvas.ZIndex="1"  
                             />
                    </StackPanel>-->
                    <StackPanel  Orientation="Vertical">
                        <TextBlock 
                             Style="{StaticResource MyTextBlockStyle}"
                             Text="{Binding Title}"
                             TextWrapping="Wrap"
                             FontSize="18"
                             IsTapEnabled="True" 
                             HorizontalAlignment="Left"  
                             />
                        <Image 
                            Source="{Binding ImagePath}"
                             />
                        <TextBlock 
                             Style="{StaticResource MyTextBlockStyle}"
                             Text="{Binding Date}"
                             TextWrapping="Wrap"
                             FontSize="12"
                             Width="302"
                             IsTapEnabled="True"
                             HorizontalAlignment="Right"  
                             />
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <TextBlock
             x:Name="NameOfSection"
             Style="{StaticResource MyTextBlockStyle}"
             Margin="10,10,0,0"
             Text="TechNews"
             Height="29"
             Width="142"
             />
        <TextBox
            x:Name="TextSearch"
            PlaceholderText="Search" 
            HorizontalAlignment="Left"
            Margin="206,14,0,0"
            TextWrapping="Wrap" 
            VerticalAlignment="Top" 
            Height="29"
            Width="166"
            />
        <TextBlock 
            Text="{Binding News.Count, Converter={StaticResource CountNewsToStringConverter}}"
            Style="{StaticResource MyTextBlockStyle}"
            FontSize="15"
            Margin="10,53,0,0" 
            VerticalAlignment="Top"
            Width="362"
            Height="16"
            />
        <ProgressBar
             x:Name="ProgressBar"
             HorizontalAlignment="Left"
             Height="18"
             Margin="3,562,0,0"
             VerticalAlignment="Top"
             Width="396"
             RenderTransformOrigin="0.5,0.5"
             >
            <ProgressBar.RenderTransform>
                <CompositeTransform ScaleY="-1"/>
            </ProgressBar.RenderTransform>
        </ProgressBar>
    </Grid>
</Page>
